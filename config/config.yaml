# Cartographer Configuration
# Drone-to-Map Matching Pipeline

# Data paths
paths:
  map_tif: "data/map.tif"
  drone_images_dir: "data/train_data/drone_images/"
  camera_calibration: "data/train_data/camera_infomation.yaml"
  ground_truth: "data/train_data/ground_truth.csv"
  output_dir: "output/"

# Model weights
weights:
  superpoint_lightglue: "weight/superpoint_lightglue_pipeline.onnx"
  disk_lightglue: "weight/disk_lightglue_end2end_fused_cpu.onnx"
  disk_descriptor: "weight/disk_descriptor.onnx"
  superpoint_descriptor: "weight/superpoint_descriptor.onnx"

# Pipeline settings
pipeline:
  type: "e2e"  # "e2e" (end-to-end LightGlue) or "descriptor" (descriptor matching)
  feature_extractor: "superpoint"  # "superpoint" or "disk"

# Input settings
input:
  drone_image: "1537.017421696.png"
  map_center_x: 2811
  map_center_y: 3651

# Drone image preprocessing
preprocessing:
  scale: 1.0
  rotation: 0
  undistort: false

# Angle search for rotation-variant features
angle_search:
  enabled: true
  start: -180
  end: 180
  step: 20
  refine: true

# Map extraction
map_extraction:
  default_patch_size: 1200
  allow_clip: true

# Feature matching
matching:
  model: "similarity"
  ratio_thresh: 0.95
  ransac_thresh: 0.01
  confidence: 0.99
  min_inliers: 20

# Visualization
visualization:
  enabled: true
  save_results: true
  output_file: "matching_results.png"
  max_keypoints_draw: 10000
  max_matches_draw: 500

# Logging
logging:
  level: "INFO"
  format: "%(levelname)s - %(message)s"
